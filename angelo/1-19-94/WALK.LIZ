”3CÅBBÉBÑÅBÖÇBÅÉBÅÅBÅÅBÇÇBÅÅBBÉBÑÅBÖÇBÅÉBÅÅBÅÅBBÉBÑÅBÖÇBÅÉBÅÅBÅÅBÇÇBÅÅBBÉBÑÅBÖÇBÅÉBÅÅBÅÅBBÉBÑÅBÖÇBÅÉBÅÅBÅÅBÇÇBÅÅBBÉBÑÅBÖÇBÅÉBÅÅBÅÅBÅABÅAÉBÅAÑÅBÖÇBÅÉBÅÅBÅÅBÇÇBÅÅBBÉBÑÅBÖÇBÅÉBÅÅBÅÅBABAÉBÅAÑÅBÅAÖÜBBAÅÅBÑAÅBÇÅBÅÇÅABÅÅABÅABÉÅABÑÇABÖÉBÅÅBÅÅBÉAÅBABAÉBAÑÅBÅAÖÜBBAÅÅBÑAÅBÇÅBÅÇABÅABABÉABÑÖAABBÖÜABBÅÅBÅÅBÉAÅBÉAABÉAAÉBAÑÅBÅAÖÜBBAÅÅBÅÅÅABÅÅÅABÇABÅAÉBBAÉBBÉABÑÖAABBÖÜABBÅÅBÅÅBAÅÅBÅABÅAÉBÉAAÑÅBAÖäBBAAÅBÅÅABÅABÇAÉBBÅAÅBAÅBÉAÉBBÑÅABÖäAABBÅBÅÅBAÅBÑAABAÉBAÑBÉAAÖäBBAAÅBÉAÅÅABÅAÉBBÇAÅBÅAÑBBABÉABÑAÉBBÖäAABBÅÅABÇÅBAÅBÖAABÖAAÉBAÑBÉAAÖäBBAAÅBAÇÅÑABBÅABÇAÑBBÅAÖBBAÖBBÉABÑAÉBBÖäAABBÅABÇÅBÇAÅBÖAABÖAAÉBAÑBAÖÅBÅAÇÉBAÇÅBÇÅABÅÇAÑBBÅAÖBBAÖBBÉABÑABÖÅAÅBÇÉABÇÅBÇÅBÖAABÜAAÉBÅAÑBAÖÉBBAÇäBBAAÅBÉAÅÖABBÇAÉBBÅAÖBBAÖBBÉAÅBÑABÖÉAABÇäAABBÅÖABBÅBÑAABÜAAÉBÅAÑBÅAÖBAÇäBBAAÅBAÇÅBÅÇABÅAÑBBAÜBBÉAÅBÑAÅBÖABÇäAABBÅABÇÅBÉAABÜAAÉBÇAÑBÇAÖBAÇÉBBAÇäBBAAÅBÅÇABÅAÉBBAÜBBÉAÇBÑAÇBÖABÇÉAABÇäAABBÅBÅABÜAAÉBÇAãBBAÖBÅAÅäBBAAäBBAAÅÖABBÇAÉBBÅAÅBAÜBBÉAÇBãAABÖAÅBÅäAABBäAABBÅBÅABÉAÉBÅAÑBÇAÖBAÅäBBAAäBBAAÅÖABBÇAÅBÅAÅBAÉBÉAÅBÑAÇBÖABÅäAABBäAABBÅBÅBÉAÉBÅAÑBÅAÖBAÅÖBBAÅÅAÅÅAÅÇAÉBBÅAÅAÉBÉAÅBÑAÅBÖABÅÖAABÅÅBÅÅBÅBÅÉBÅAÑÇBAÖÅAÅÅAÅÅAÅÅAÅÇAÅÅAÅAÅÉAÅBÑÇABÖÅBÅÅBÅÅBÅÅBÇÇBÅÅBÇÇBÅÅBÇÇBÅÅBÇÇBÅÅBÇAÇBAÅBÇAÇBAÅBAÇBAÅBAÇBÉAAÅBÉAAÇBÅAÅBAÇBÑAAÅBAÅÇBÑAAÅBÉAÇBÉAAÅBÅÇBAÅBÅÇBAÅBÉAÇBÉAAÅBÉAÇBÅAÅBÅÇBÉAAÅBÅÇBÅBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBÅABÅABÅABBBBBBBBBBBBBBABABÅABÅABÅABÅABBÅABÅABÅABÅABÅABBBBÅABABABABÅABÅABÅABBABABABABABÉABBBBÅABÉAABÉAABABÅABÅABÅABÅABABAÉBBAÉBBABABÉABBBBABÅABÅABÉAABABA	BABABAÉBBAÅBAÅBAÉBBABAB	BBABABABABÉAABÉAABÅA	ÅABAÉBBAÅBABABABAÉBBAÉBBÅAB	BABABABABÉAABÉAABA	ÉABBABABABABABAÉBBAÉBBAB	BÅABABABABABÅABA	BABABABABABABAÅBAB	BBABABABABA
    add  ax,x
    add  ax,pofs {THIS IS TEMPORARY, I WILL ERASE THIS LATER}
    mov  di,ax
    mov  al,c
    stosb
  end end else if (gmis=2)or(gmis=3) then syeyan(x,y,c)else if gmis=0 then hiyey(x,y,c)else pset(x,y,c);
end;{yeyan}



function syeyun(x,y:integer):byte;
var c:byte;
begin
  asm
    mov   ax,80
    mul   y
    mov   si,x
    shr   si,1
    shr   si,1
    add   si,ax
    add   si,syaofs
    mov   ah,byte(x)
    and   ah,3
    mov   al,READ_MAP
    mov   dx,GC_INDEX
    out   dx,ax
    mov   cx,ds
    mov   ax,0a000h
    mov   ds,ax
    lodsb
    mov   ds,cx
    mov   c,al
  end;
  syeyun:=c;
end;{syeyun}

function syeyun2(x,y:integer):byte;
var c:byte;
begin
  asm
    mov   ax,80
    mul   y
    mov   si,x
    ror   si,1
    ror   si,1
    add   si,ax
    add   si,gofs
    mov   cx,ds
    mov   ds,gseg
    lodsb
    mov   ds,cx
    mov   c,al
  end;
  syeyun2:=c;
end;{syeyun2}

procedure superpage(page:word);
begin
  asm
    cli
    mov  ax,page
    push ax
    mov  al,0ch
    mov  dx,3d4h
    out  dx,ax
    pop  ax
    mov  ah,al
    mov  al,0dh
    out  dx,ax
    sti
  end;
end;{superpage}

procedure setdofs(myofs:word);
begin
  port[$3d4]:=$c;
  port[$3d5]:=hi(myofs);
  port[$3d4]:=$d;
  port[$3d5]:=lo(myofs);
end;{setdofs}

procedure moveyey(x,y:integer);
begin
  asm
    mov  es,pseg
    mov  cx,ds
    mov  ds,gseg
    mov  ax,320
    mul  y
    add  ax,x
    mov  di,ax
    mov  si,ax
    movsb
    mov  ds,cx
  end;
end;{moveyey}

procedure horline(x,y,l:integer;c:byte);
begin
  if l>0 then
  asm
	 mov  es,pseg
    mov  ax,320
    mul  y
    add  ax,x
    mov  di,ax
    mov  al,c
    dec  l
    mov  cx,l
    rep stosb
  end;
end;{horline}

procedure vertline(x,y,l:integer;c:byte);
begin
  if l>0 then
  asm
	 mov  es,pseg
    mov  ax,320
    mul  y
    add  ax,x
    mov  di,ax
    mov  al,c
    dec  l
	 mov  cx,l
  @looper:
	 stosb
	 add  di,319
	 loop @looper
  end;
end;{vertline}

procedure movehorline(x,y,l:integer;c:byte);
begin
  if l>0 then
  asm
	 mov  es,pseg
    mov  ax,320
    mul  y
    add  ax,x
    mov  di,ax
    mov  si,di
    add  si,gofs
    mov  al,c
    dec  l
    mov  cx,l
    mov  ax,ds
    mov  ds,gseg
    rep  movsb
    mov  ds,ax
  end;
end;{movehorline}

function getplot(x,y:word):byte;
var
  g:byte;
begin
  asm
    mov  ah,0dh
    mov  cx,x
    mov  dx,y
    int  10h
    mov  g,al
  end;
  getplot:=g;
end;{getplot}


function yeyun(x,y:integer):byte;
var c:byte;
begin
  if gmis=1 then
  asm
    mov  ax,320
    mul  y
    add  ax,x
    add  ax,gofs
    mov  cx,ds
    mov  ds,gseg
    mov  si,ax
    lodsb
    mov  c,al
    mov  ds,cx
  end else if (gmis=2)or(gmis=3) then c:=syeyun(x,y)else c:=getplot(x,y);
  yeyun:=c;
end;{yeyun}

function yeyun2(x,y:integer):byte;
var c:byte;
begin
  asm
    mov  ax,320
    mul  y
    add  ax,x
    add  ax,gofs2
    mov  cx,ds
    mov  ds,gseg2
    mov  si,ax
    lodsb
    mov  c,al
    mov  ds,cx
  end;
  yeyun2:=c;
end;{yeyun2}

procedure myup(pix,red,grn,blu:byte);
begin
  asm
    pushf
    cli
    mov  dx,03c8h
    mov  al,pix
    out  dx,al
    inc  dx
    mov  al,red
    out  dx,al
    mov  al,grn
    out  dx,al
    mov  al,blu
    out  dx,al
    popf
  end;
end;{myup}

procedure mygetdac(pix:byte;var rd,gr,bl:byte);
var red,grn,blu:byte;
begin
  asm
    pushf
    cli
	 mov  dx,03c7h
	 mov  al,pix
    out  dx,alv   si,x
    shr   si,1
    shr   si,1
    add   si,ax
    shl   ax,1
    shl   ax,1
    mov   di,ax
    add   si,syaofs
    mov   ah,byte(x)
    and   ah,3
    mov   al,READ_MAP
    mov   dx,GC_INDEX
    out   dx,ax
    mov   cx,ds
    mov   ax,0a000h
    mov   ds,ax
    movsb
    mov   ds,cx
  end;
end;{movesyeyf}

procedure horline(x,y,l:integer;c:byte);
begin
  if l>0 then
  begin
    if gmis=1 then
    asm
      mov  es,pseg
      mov  ax,320
      mul  y
      add  ax,x
      mov  di,ax
      mov  al,c
      dec  l
      mov  cx,l
      rep stosb
    end else line(x,y,x+l-1,y,c);
  end;
end;{horline}

procedure vertline(x,y,l:integer;c:byte);
begin
  if l>0 then
  begin
    if gmis=1 then
    asm
      mov  es,pseg
      mov  ax,320
      mul  y
      add  ax,x
      mov  di,ax
      mov  al,c
      dec  l
      mov  cx,l
    @looper:
      stosb
      add  di,319
      loop @looper
    end else line(x,y,x,y+l-1,c);
  end;
end;{vertline}

procedure movehorline(x,y,l:integer;c:byte);{HINDI PA! HINDI PA!}
begin                                                 {}
  if l>0 then                                         {}
  asm                                                 {}
	 mov  es,pseg                                 {}
    mov  ax,320                                       {}
    mul  y                                            {}
    add  ax,x                                         {}
    mov  di,ax                                   ããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããããIãÅABÅÅÅABBÅBÇAÉBBÉBBAÅÅÅÅÅÅBB
AâBBAABBÅBBÇAÅBÅBÅ	AÅÅÅAÅBÇBÅABÇBÅÅABBÅÇBAÇABÅÅAÅÅÅÅÅÅÅABBÅA
AäBBAAABB